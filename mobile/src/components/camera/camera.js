var React = require('react-native');
var _ = require('underscore');
var Api = require('../network/api.js');

import Camera from 'react-native-camera';

// import 
var {
  StyleSheet,
  View,
  Text,
  Dimensions,
  Image,
  TouchableHighlight
} = React;

module.exports = React.createClass({
  
  render: function() {
    return (
      
      <View style={styles.container}>

        <View style={[styles.header]}>
          <Camera 
            ref={ (cam) => {
              this.camera = cam;
            }}
            style = {styles.preview}
            aspect = {Camera.constants.Aspect.fill}
            captureTarget={Camera.constants.CaptureTarget.memory}
            captureQuality={Camera.constants.CaptureQuality.high} // jenna
            >
          </Camera>
        </View> 
            
         <View style={styles.footer}>    
          <TouchableHighlight onPress={this.takePicture}>
            <Image source={require('./camera.png')}/>
          </TouchableHighlight>
         </View> 
         
      </View>
    );
  },

  takePicture: function() {
    this.camera.capture()

      .then( (data) => {

        // this.props.route.passProps.activity.image = 'data:image/jpeg;base64,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';

        // Api.saveData( this.props.route.passProps.activity );

        var temp = 'data:image/jpeg;base64,' + data; // jenna

        // console.log('jenna temp: ', temp); // jenna

        this.props.route.passProps.activity.image = temp; // jenna

        this.props.navigator.replace({
          name: 'activity',
          passProps: this.props.route.passProps
        });

      })
      .catch(err => console.error(err));
  }

});

var styles = StyleSheet.create({

  preview: {
    flex: 1,
    justifyContent: 'flex-end',
    alignItems: 'center',
    height: Dimensions.get('window').height,
    width: Dimensions.get('window').width
  },

  container: {
    flex: 1,
    alignItems: 'stretch',
    marginTop: 30
  },

  header: {
    flex: 2
  },

  footer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#7A87A7'
  },
 
});